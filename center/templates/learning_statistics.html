{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Statistics Dashboard{% endblock %}

{% block vendor_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/toastr/toastr.css' %}" />
{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/chartjs/chartjs.js' %}"></script>
  <script src="{% static 'vendor/libs/toastr/toastr.js' %}"></script>
{% endblock vendor_js %}

{% block page_css %}
  {{ block.super }}
{% endblock page_css %}

{% block page_js %}
  {{ block.super }}
  <script src="{% static 'customJs/center/statistics.js' %}"></script>
{% endblock page_js %}

{% block content %}
<div class="container-fluid py-4">

  <!-- Key Statistics Section -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h5 class="fw-bold">Filiallar</h5>
          <h3 id="totalBranches" class="text-primary">0</h3>
          <small class="text-muted">Umumiy filiallar</small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h5 class="fw-bold">Kasblar</h5>
          <h3 id="totalProfessions" class="text-success">0</h3>
          <small class="text-muted">Umumiy kasblar</small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h5 class="fw-bold">Kurslar</h5>
          <h3 id="totalCourses" class="text-danger">0</h3>
          <small class="text-muted">Umumiy kurslar</small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h5 class="fw-bold">Guruhlar</h5>
          <h3 id="totalGroups" class="text-warning">0</h3>
          <small class="text-muted">Umumiy guruhlar</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Filial Statistics -->
  <div class="row mb-4">
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-primary mb-0">Filiallar oylik o'sishi</h6>
        </div>
        <div class="card-body">
          <canvas id="branchGrowthChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-info mb-0">Filiallar joylashuvi</h6>
        </div>
        <div class="card-body">
          <ul id="branchLocations" class="list-group list-group-flush">
            <!-- Filial joylashuvlari dinamik ravishda yuklanadi -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Kasblar va Yonalishlar Statistics -->
  <div class="row mb-4">
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-success mb-0">Kasblar bo'yicha taqsimot</h6>
        </div>
        <div class="card-body">
          <canvas id="professionDistributionChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-secondary mb-0">Kasblar va yo'nalishlar</h6>
        </div>
        <div class="card-body">
          <ul id="professionFieldList" class="list-group list-group-flush">
            <!-- Kasb va yo'nalishlar dinamik ravishda yuklanadi -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Guruhlar Statistics -->
  <div class="row mb-4">
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-warning mb-0">Guruhlar haftalik dars jadvali</h6>
        </div>
        <div class="card-body">
          <canvas id="weeklyScheduleChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-danger mb-0">Faol guruhlar va talabalar soni</h6>
        </div>
        <div class="card-body">
          <ul id="activeGroupsList" class="list-group list-group-flush">
            <!-- Faol guruhlar va talabalar soni dinamik ravishda yuklanadi -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Kurslar Statistics -->
  <div class="row mb-4">
    <div class="col-lg-12">
      <div class="card shadow-sm">
        <div class="card-header">
          <h6 class="fw-bold text-primary mb-0">Kurslar va umumiy daromad</h6>
        </div>
        <div class="card-body">
          <canvas id="courseRevenueChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
