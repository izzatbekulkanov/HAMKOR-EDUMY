{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Asosiy sahifa{% endblock %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/apex-charts/apex-charts.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/libs/swiper/swiper.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/libs/datatables-bs5/datatables.bootstrap5.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css' %}" />
<link rel="stylesheet" href="{% static 'vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css' %}" />
    <link rel="stylesheet" href="{% static 'vendor/libs/toastr/toastr.css' %}" />

{% endblock vendor_css %}

{% block vendor_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/apex-charts/apexcharts.js' %}"></script>
<script src="{% static 'vendor/libs/swiper/swiper.js' %}"></script>
<script src="{% static 'vendor/libs/datatables-bs5/datatables-bootstrap5.js' %}"></script>
    <script src="{% static 'vendor/libs/toastr/toastr.js' %}"></script>

{% endblock vendor_js %}

{% block page_css %}
{{ block.super }}

  <style>
  .icon-box {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hover-shadow-lg:hover {
  transform: translateY(-10px);
  box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease-in-out;
}
  </style>


<link rel="stylesheet" href="{% static 'vendor/css/pages/cards-advance.css' %}" />
{% endblock page_css %}

{% block page_js %}
{{ block.super }}
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const showToastr = "{{ request.session.show_login_toastr|default:False|escapejs }}";
        const lastLogin = "{{ request.session.last_login|escapejs }}";

        if (showToastr === "True" && lastLogin) {
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-bottom-right",
                "preventDuplicates": true,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };

            toastr.success(`Oxirgi marta tizimga kirish vaqti: ${lastLogin}`, "Tizimga kirish ma'lumotlari");

            // Toastr flagini tozalash uchun serverga soâ€˜rov yuboring
            fetch("{% url 'clear_toastr_session' %}", {
                method: "POST",
                headers: { "X-CSRFToken": "{{ csrf_token }}" },
            });
        }
    });
</script>
<script src="{% static 'js/dashboards-analytics.js' %}"></script>
{% endblock page_js %}

{% block content %}
<div class="row g-6">
<!-- ENGLISH HOUSE Analytics -->
<div class="col-lg-12">
  <div class="swiper-container swiper-container-horizontal swiper swiper-card-advance-bg" id="swiper-with-pagination-cards">
    <div class="swiper-wrapper">
      <!-- Slide 1: O'quvchilar statistikasi -->
      <div class="swiper-slide">
        <div class="row">
          <div class="col-12">
            <h5 class="text-white mb-0">ENGLISH HOUSE Analytics</h5>
            <small>Total 85% Student Engagement</small>
          </div>
          <div class="row">
            <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1 pt-md-9">
              <h6 class="text-white mt-0 mt-md-3 mb-4">O'quvchilar</h6>
              <div class="row">
                <div class="col-6">
                  <ul class="list-unstyled mb-0">
                    <li class="d-flex mb-4 align-items-center">
                      <p class="mb-0 fw-medium me-2 website-analytics-text-bg">35%</p>
                      <p class="mb-0">Tinglovchilar</p>
                    </li>
                    <li class="d-flex align-items-center">
                      <p class="mb-0 fw-medium me-2 website-analytics-text-bg">120</p>
                      <p class="mb-0">Yangi qatnashchilar</p>
                    </li>
                  </ul>
                </div>
                <div class="col-6">
                  <ul class="list-unstyled mb-0">
                    <li class="d-flex mb-4 align-items-center">
                      <p class="mb-0 fw-medium me-2 website-analytics-text-bg">950</p>
                      <p class="mb-0">Baho berilgan testlar</p>
                    </li>
                    <li class="d-flex align-items-center">
                      <p class="mb-0 fw-medium me-2 website-analytics-text-bg">78%</p>
                      <p class="mb-0">Davomat</p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
              <img src="{% static 'img/illustrations/card-website-analytics-1.png' %}" alt="Student Analytics" height="150" class="card-website-analytics-img">
            </div>
          </div>
        </div>
      </div>

      <!-- Slide 2: O'qituvchilar va darslar -->
      <div class="swiper-slide">
        <div class="row">
          <div class="col-12">
            <h5 class="text-white mb-0">ENGLISH HOUSE Analytics</h5>
            <small>Total 85% Student Engagement</small>
          </div>
          <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1 pt-md-9">
            <h6 class="text-white mt-0 mt-md-3 mb-4">O'qituvchilar va Darslar</h6>
            <div class="row">
              <div class="col-6">
                <ul class="list-unstyled mb-0">
                  <li class="d-flex mb-4 align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">12</p>
                    <p class="mb-0">O'qituvchilar</p>
                  </li>
                  <li class="d-flex align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">350</p>
                    <p class="mb-0">Darslar</p>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                <ul class="list-unstyled mb-0">
                  <li class="d-flex mb-4 align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">25</p>
                    <p class="mb-0">Sinf xonalari</p>
                  </li>
                  <li class="d-flex align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">1.8k</p>
                    <p class="mb-0">Soatlar</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
            <img src="{% static 'img/illustrations/card-website-analytics-2.png' %}" alt="Teacher Analytics" height="150" class="card-website-analytics-img">
          </div>
        </div>
      </div>

      <!-- Slide 3: Natijalar va muvaffaqiyatlar -->
      <div class="swiper-slide">
        <div class="row">
          <div class="col-12">
            <h5 class="text-white mb-0">ENGLISH HOUSE Analytics</h5>
            <small>Total 85% Student Engagement</small>
          </div>
          <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1 pt-md-9">
            <h6 class="text-white mt-0 mt-md-3 mb-4">Natijalar va Muvaffaqiyatlar</h6>
            <div class="row">
              <div class="col-6">
                <ul class="list-unstyled mb-0">
                  <li class="d-flex mb-4 align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">320</p>
                    <p class="mb-0">IELTS topshirgan</p>
                  </li>
                  <li class="d-flex align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">110</p>
                    <p class="mb-0">Scholarship yutgan</p>
                  </li>
                </ul>
              </div>
              <div class="col-6">
                <ul class="list-unstyled mb-0">
                  <li class="d-flex mb-4 align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">87%</p>
                    <p class="mb-0">Sertifikatlanganlar</p>
                  </li>
                  <li class="d-flex align-items-center">
                    <p class="mb-0 fw-medium me-2 website-analytics-text-bg">5k</p>
                    <p class="mb-0">Bitiruvchilar</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
            <img src="{% static 'img/illustrations/card-website-analytics-3.png' %}" alt="Results Analytics" height="150" class="card-website-analytics-img">
          </div>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
</div>
<!--/ ENGLISH HOUSE Analytics -->


<!-- Menyular -->
<div class="row mt-5">
  <!-- Menu Cards -->

</div>

{% with cards_data=cards_data %}
  {% for card in cards_data %}
    {% if request.user.now_role in card.now_roles %}
      <div class="col-md-3">
        <div class="card border shadow-sm text-center hover-shadow-lg">
          <div class="card-body py-4">
            <div class="icon-box {{ card.bg_color }} text-white mb-3 mx-auto">
              <i class="ti {{ card.icon }} fs-3"></i>
            </div>
            <h6 class="{{ card.text_color }}">{{ card.title }}</h6>
          </div>
          <a href="{% url card.url_name %}" class="stretched-link"></a>
        </div>
      </div>
    {% endif %}
  {% endfor %}
{% endwith %}
</div>
{% endblock %}
